<html lang="de">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  
    <title>slidoo</title>

    <link href="http://fonts.googleapis.com/icon?family=Material%20Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="css/materialize.min.css" media="screen,projection">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600,700,300' rel='stylesheet' type='text/css'>   
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>

    
    <script src="js/login.js"></script>    
    <!--<script charset="utf-8" src="js/spielplatzanlegendesktop.js"></script> -->
    <script charset="utf-8" src="../www/com/apiomat/apiomat.js"></script>
    
  </head>
   <body ng-app="myApp" ng-controller="DetailSpielplatzCtrl">
 <div class="navbar-fixed">  
  <nav>
    <div class="nav-wrapper">
       <a href="#" class="brand-logo left">
        <img src="bilder/logo.png" height="32px">
        slidoo
      </a>
      <ul id="nav-mobile" class="right hide-on-med-and-down">
          <li><a href="center.html" class="smoothScroll">Alle Spielpl&auml;tze</a></li>
          <li class="active"><a href="create.html" class="smoothScroll">Spielplatz erstellen</a></li>
          <li><a href="index.html" onklick="logout()">Logout</a>
      </ul>
    </div>
  </nav>
 </div>   

<div class="container">
      <div class="row">
                        <div class="input-field col s6" style="margin-bottom: 100px">
                          <label class="item">
                                <input type="button" onclick="loeschen()" value="Spielplatz löschen" />
                          </label>
                        </div>
                      </div>
                     
<h1>Spielplatz bearbeiten</h1>  
<div class="card" class="z-depth-5">                     
<form class="col s12" >
                      <br>
                      <h2>Lokalisation</h2>
               
                      <div class="row">
                        <div class="input-field col s12">
                            <input id="spielplatzname" type="text" class="validate" >
                          <label >Name</label>
                        </div>
                      </div>

                      <div class="row">
                        <div class="input-field col s6">
                          <input id="spielplatzstraße" type="text" class="validate" >
                          <label >Straße</label>
                        </div>
                          <div class="input-field col s6">
                          <input id="hausnummer" type="number" class="validate" >
                          <label >Hausnummer</label>
                        </div>
                        </div>
                          
                        <div class="row">  
                            <div class="input-field col s6">
                              <input id="plz" type="number" class="validate" >
                              <label >Postleitzahl</label>
                            </div>
                                <div class="input-field col s6">
                                <select id="stadtteil">
                                  <option  value="1">Gailbach</option>
                                  <option  value="2">Nilkheim</option>
                                  <option  value="3">Obernau</option>
                                    <option  value="4">Schweinheim</option>
                                  <option  value="5">Strietwald</option>
                                </select>
                                <label>Stadtteil</label>
                            </div>
                        </div>                    
                      <h2>Struktur</h2> 
                        <div class="row">
                         <div class="input-field col s6">
                            <select id="alter">
                              <option  value="1">Bis 5 Jahre</option>
                              <option  value="2">Bis 10 Jahre</option>
                              <option  value="3">Bis 15 Jahre</option>
                            </select>
                            <label>Altersgruppe</label>
                        </div>
                            <div class="input-field col s6">
                            <select id="sitzgelegenheiten">
                              <option  value="1">Für bis zu 5 Personen</option>
                              <option  value="2">Für bis zu 15 Personen</option>
                              <option  value="3">für mehr als 20 Personen</option>
                            </select>
                            <label>Anzahl Sitzgelegenheiten</label>
                        </div>
                      </div>
                      <div class="row">
                          <div class="input-field col s6">
                          <input id="groesse" type="number" class="validate" >
                          <label >Größe in m2</label>
                        </div>
                        <div class="input-field col s6">
                        <select id="status">
                          <option value="1">Bespielbar</option>
                          <option value="2">Nicht bespielbar</option>
                        </select>
                        <label>Status</label>
                      </div>
                            
                      </div>
                        <h2>Ausstattung</h2> 
                        <div class="row" >
                           
                            <div class="input-field col s6">
                                <input type="checkbox" class="filled-in" id="sanitar"/>
                                <label for="sanitar">Sanitäranlagen</label>
                            </div>
                            <div class="input-field col s6">
                                <input type="checkbox" class="filled-in" id="grillplatz"/>
                                <label for="grillplatz">Grillplatz</label>
                            </div>
                        </div>
                       <br/>
                        <h2>Spielgeräte</h2> 
                        <div class="row" >
                            <div class="input-field col s6">
                                <input type="checkbox" class="filled-in" id="rutsche" />
                                <label for="rutsche">Rutsche</label>
                            </div>
                            <div class="input-field col s6">
                                <input type="checkbox" class="filled-in" id="kletterturm" />
                                <label for="kletterturm">Kletterturm</label>
                            </div>
                        </div>
                        
                        <div class="row" >
                            <div class="input-field col s6">
                                <input type="checkbox" class="filled-in" id="wippe" />
                                <label for="wippe">Wippe</label>
                            </div>
                            <div class="input-field col s6">
                                <input type="checkbox" class="filled-in" id="ballsport" />
                                <label for="ballsport">Ballsport</label>
                            </div>
                        </div>
                            
                        <div class="row" >
                            <div class="input-field col s6">
                                <input type="checkbox" class="filled-in" id="tischtennis" />
                                <label for="tischtennis">Tischtennis</label>
                            </div>
                            <div class="input-field col s6">
                                <input type="checkbox" class="filled-in" id="schaukel" />
                                <label for="schaukel">Schaukel</label>
                            </div>
                        </div>
                        
                          <div class="row" >
                            <div class="input-field col s6">
                                <input type="checkbox" class="filled-in" id="sandkasten" />
                                <label for="sandkasten">Sandkasten</label>
                            </div>
                            <div class="input-field col s6">
                                <input type="checkbox" class="filled-in" id="wasserspiele" />
                                <label for="wasserspiele">Wasserspiele</label>
                            </div>
                        </div>
                        <div class="row" >
                        <div class="input-field col s6">
                                <input type="checkbox" class="filled-in" id="klettergerust" />
                                <label for="klettergerust">Klettergerüst</label>
                            </div>
                            <div class="input-field col s6">
                                <input type="checkbox" class="filled-in" id="seilbahn" />
                                <label for="seilbahn">Seilbahn</label>
                            </div>
                        </div>
                            <div class="row" >
                            <div class="input-field col s6">
                                <input type="checkbox" class="filled-in" id="spielobjekt" />
                                <label for="spielobjekt">Spielobjekt</label>
                            </div>
                            <div class="input-field col s6">
                                <input type="checkbox" class="filled-in" id="sonstiges" />
                                <label for="sonstiges">Sonstiges</label>
                            </div>
                        </div>
                        <br/>
                        <h2>Bildupload</h2>  
                        <form action="#">
                          <div class="file-field input-field">
                            <div class="btn">
                              <span>File</span>
                              <input type="file" multiple>
                            </div>
                            <div class="file-path-wrapper">
                              <input class="file-path validate" type="text" placeholder="Upload one or more files">
                            </div>
                          </div>
                        </form>

                        <div class="row">
                        <div class="input-field col s6" style="margin-bottom: 100px">
                          <label class="item">
                             <input type="button" onclick="aendern()" value="Änderungen speichern" />
                          </label>
                        </div>
                      </div>
                     
                      
                    </form>
                  </div>


    
    </div>                     
                      
                   
  </body>
 
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script type="text/javascript" src="../www/js/materialize.min.js"></script>
<script> 
    $('select').material_select();
 </script>
<script>

var app = angular.module('myApp', []);
    var user = new Apiomat.User();
    user.setUserName("test23");
    user.setPassword("test23");
    Apiomat.Datastore.configureWithCredentials(user);
 
    var saveCB = {
      onOk: function() {
       
      },
      onError: function(error) {

      }
    };
    user.loadMe({
      onOk: function() {},
      onError: function(error) {
          
        user.save(saveCB);
      }
    });  
    
   
    

app.controller('DetailSpielplatzCtrl', function($scope) {
   var url = window.location.href;
   var id1 = url.substring(url.indexOf('?')+1);
 $scope.playlistdetails = [];
   //DB-verbindung mit Spielplatztabelle
    Apiomat.spielplatz.getspielplatzs("id==id(" + id1 + ")", {
        onOk : function(loadedObjs) {
            //Now you can do sth with loaded objects (loadedObjs)
            var arrayspielplaetze = loadedObjs[0]["data"];
    //Ausgabe in Konsole
    var name = arrayspielplaetze["name"];
            
       $scope.playlistdetails = [
    { title: name},
  ];
            $scope.$apply();

},
onError : function(error) {
//handle error
}
})
});

function aendern() {
    
    var myspielplatz;
    var url = window.location.href;
    var id1 = url.substring(url.indexOf('?')+1);
    
    Apiomat.spielplatz.getspielplatzs("id==id(" + id1 + ")", {
      onOk: function(result) {
        myspielplatz = result[0];
        myspielplatz.setName("TestAAAAAAAA");
        myspielplatz.save({
          onOk: function() {
            alert("geht");
          },
          onError: function(error) {
            console.log(error);
          }
        })
      },
      onError: function(error) {
        console.log(error);
      }
    });
   
}
    
function loeschen() {
    
    var myspielplatz;
    var url = window.location.href;
    var id1 = url.substring(url.indexOf('?')+1);
    
    Apiomat.spielplatz.getspielplatzs("id==id(" + id1 + ")", {
      onOk: function(result) {
        myspielplatz = result[0];
        
        myspielplatz.deleteModel({
          onOk: function() {
            alert("Ihr Spielplatz wurde gelöscht");
              window.location.href = "center.html";
              
          },
          onError: function(error) {
            console.log(error);
          }
        })
      },
      onError: function(error) {
        console.log(error);
      }
    });
   
}    

  </script>
    
</html>